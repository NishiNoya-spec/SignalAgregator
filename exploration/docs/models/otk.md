# Эксперименты. Таргет - данные ОТК

## Инструкция:
1) Подготовка данных:
   1) Запуск препроцессинга для сигналов на LNK100. (см. [препроцессинг](../preprocessing.md))
   2) Запуск exploration/models/otk/ipsrnk_analisys.py. Заменить все пути в начале файла на актуальные:
      1) PATH_TO_ITS_DATA. Путь до выгрузки ИТС. (Новую выгрузку запросить у Roman.Nazarov@evraz.com)
      2) PATH_TO_REDONE_DATA. Путь до информации о переделе рельс. (Новую выгрузку запросить у Roman.Nazarov@evraz.com)
      3) PATH_TO_METADATA. Путь до метаданных. Те же применяются в [препроцессинге](../preprocessing.md)
      4) PATH_TO_IPSRNKA_DATA. Путь до предобработанных в п1. данным
      5) SAVE_PATH. Путь для сохранения результатов работы алгоритма. Готового для обучения датасета.
   3) При необходимости изменения таргета: внести изменения в константу DEFECT_TYPE в файле exploration/models/otk/constants.py.

2) Обучение:
   1) Запуск exploration/models/otk/train.py:
      1) Прописать актуальный путь до данных в PATH_TO_DATA
      2) Указать краты для обучения DEFECT_CRATES
      
3) Тестирование:
Результатом тестирования является таблица факт / прогноз с указанием значений фичей и степенью их влияния на результат.
   1) Запуск exploration/models/otk/model_test.py:
      1) PATH_TO_MODEL - путь до cb модели (если модель другая, то поменять код)
      2) PATH_TO_FEATURES - путь до датасета аналогичному тому, что применялся в обучении
      3) PATH_TO_METADATA - путь до метаданных
      4) SAVE_PATH. Путь для сохранения результатов работы алгоритма.
